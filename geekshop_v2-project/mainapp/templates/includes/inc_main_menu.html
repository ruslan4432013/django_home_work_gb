<ul class="menu">
    {% for link in menu %}
    <li>
        <a href="{% url link.href %}"
           class="{% if request.resolver_match.view_name == link.href %}
              active
              {% endif %}">
            {{ link.name }}
        </a>
    </li>
    {% endfor %}
    {% if user.is_authenticated %}
    <li>
        <a href="{% url 'auth:edit' %}">
            {{ user.first_name|default:'Пользователь' }}
        </a>
    </li>
    {% endif %}
    <li>
        {% if user.is_authenticated %}
        <a href="{% url 'auth:logout' %}">Выйти</a>
        {% else %}
        <a href="{% url 'auth:login' %}">Войти</a>
        <a href="{% url 'auth:register' %}">Регистрация</a>
        {% endif %}
    </li>
    {% if basket %}
    <li>
        <a href="{% url 'basket:view' %}">
            {{ basket.0.total_cost|floatformat:0 }} руб

            ({{ basket.0.total_quantity }} шт)
        </a>
    </li>
    {% endif %}
</ul>









